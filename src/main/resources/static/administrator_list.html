<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title>资源平台后台管理系统</title>
    <!--[if lt IE 8]>
    <meta http-equiv="refresh" content="0;ie.html" />
    <![endif]-->
    <link rel="shortcut icon" href="favicon.ico">
    <link href="css/bootstrap.min.css?v=3.3.5" rel="stylesheet">
    <link href="css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/plugins/webuploader/webuploader.css">
    <link rel="stylesheet" href="js/plugins/layui/css/layui.css">
    <link rel="stylesheet" href="css/demo/webuploader-demo.min.css">
    <link rel="stylesheet" href="css/plugins/iCheck/custom.css">
    <link rel="stylesheet" href="css/plugins/jqgrid/ui.jqgrid.css">
    <link rel="stylesheet" href="css/demo/laypage.css">
    <link href="css/style.min.css?v=4.0.0" rel="stylesheet">
</head>
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight ibox-content">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div  class="form form-inline">
                <div class="layui-inline">
                    <input class="layui-input" name="id" id="demoReload" autocomplete="off">
                </div>
             <!--   <div class="form-group">
                    <input type="text" class="form-control" placeholder="手机号 " id="phone">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="真实姓名" id="name">
                </div>
                <div class="form-group">
                    <select class="form-control" id="status">
                        <option value="false">禁用</option>
                        <option value="true">启用</option>
                    </select>
                </div>-->
                <div class="form-group">
                    <button class="layui-btn" type="button"  data-type="reload" autocomplete="off"><i class="fa fa-search"></i>查询</button>
                </div>
            </div>
        </div>

            <!--增删改查-->
            <div class="col-sm-12 col-lg-12 col-md-12" style="padding-top: 16px;padding-bottom:16px; " >
                <div class="layui-btn-group operations">
                    <button class="layui-btn"  data-type="addNew"><i class="fa fa-plus"></i> 增加</button>
                    <button class="layui-btn layui-btn-danger"  data-type="getCheckData"><i class="fa fa-trash-o"></i> 删除</button>
                    <button class="layui-btn layui-btn-warm" > <i class="fa fa-user-md" ></i>角色分配</button>
                </div>
            </div>
            <table id="admin" lay-filter="adminstar" class="layui-hide"></table>
            <script type="text/html" id="barDemo">
                <a class="layui-btn layui-btn-primary layui-btn-sm" lay-event="details">详情</a>
                <a  class="layui-btn layui-btn-sm" lay-event="edit">编辑</a>
                <a  class="layui-btn layui-btn-danger layui-btn-sm" lay-event="delete">删除</a>
            </script>


        </div>
    </div>
</div>




<!-----------编辑,添加弹窗----------->
<div class="modal fade" id="edit">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal"><span>&times;</span></button>
                <h4 class="modal-title">编辑管理员</h4>
            </div>
            <form action="" class="form-horizontal">
                <div class="modal-body">
                    <div class="form-group">
                       <div class="row">
                           <div class="col-sm-3 text-right">
                               <i class="text-danger">*</i>
                               <label class="control-label">账号</label>
                           </div>
                           <div class="col-sm-6">
                               <input type="text" class="form-control">
                           </div>
                       </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-3 text-right">
                                <i class="text-danger">*</i>
                                <label class="control-label">手机号</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-3 text-right">
                                <i class="text-danger">*</i>
                                <label class="control-label">真实姓名</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-3 text-right">
                                <i class="text-danger">*</i>
                                <label class="control-label">密码</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-3 text-right">
                                <i class="text-danger">*</i>
                                <label class="control-label">确认密码</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-3 text-right">
                                <i class="text-danger">*</i>
                                <label class="control-label">账号状态</label>
                            </div>
                            <div class="col-sm-6">
                              <div style="padding: 6px 12px;">
                                  <label style="margin-right: 26px;"><input type="radio" class="i-checks" name="state">启用</label>
                                  <label><input type="radio" class="i-checks" name="state">禁用</label>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" data-dismiss="modal">取消</button>
                    <button class="btn btn-success" type="submit">确定</button>
                </div>
            </form>

        </div>
    </div>




</div>





</body>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/plugins/iCheck/icheck.min.js"></script>
<script src="js/plugins/layui/layui.js"></script>
<script>
    layui.use(['table','layer','jquery'],function(){
        var table=layui.table,
            form=layui.form,
            layer=layui.layer,
            $=layui.jquery;
        $(".i-checks").iCheck({
            checkboxClass: 'icheckbox_square-blue',
            radioClass: "iradio_square-blue",
        })
        var data={"code":0,"msg":"","count":1000,"data":[{
            "id":1,
            "account":"admin",
            "phone":"1233665444",
            "name":"小明",
            "state":false,
        },{
                "id":2,
                "account":"b",
                "phone":"1233665444",
                "name":"小明",
                "state":false,

            },{
                "id":3,
                "account":"a",
                "phone":"1233665444",
                "name":"小明",
                "state":false,
            }]}
        var tableInit=table.render({
            elem:"#admin",
            data:data.data
            ,cols: [[
                {type:'checkbox'},
                {field:'account',width:120,title:'账号'},
                {field:'phone',width:120,title:'手机号'},
                {field:'name',width:120,title:'姓名'},
                {field:'state',width:120,title:'账号状态',templet:function(d){
                        if(d.state){
                            return '<input type="checkbox" class="js-switch" checked lay-skin="switch" lay-filter="status"/>'
                        }else{
                            return '<input type="checkbox" class="js-switch"  lay-skin="switch" lay-filter="status"/>'
                        }
                    }},
                { minWidth: 120, title: '操作',align:'center',toolbar:'#barDemo'}
        ]],
            id:'admintest',
            page:true
        });
        form.on('switch(status)',function(obj){
            console.log(obj.elem.checked)
        })
        table.on('tool(adminstar)',function(obj){
            if(obj.event=='delete'){
                layer.confirm("确定要删除吗?",function(index){
                    //确定删除,发送请求
                    alert("sure")
                    layer.close(index)
                },function(index){
                    layer.close(index)
                })
            }else if(obj.event=='edit'){
                console.log(obj.id)
                //在这里进行ajax请求获取数据
                $("#edit").modal("show",function(obj){

                })
            }
        });
       var  active = {
            getCheckData: function(){ //获取选中数据
                var checkStatus = table.checkStatus('admin')
                    ,data = checkStatus.data;
                    console.log(data)
            },
           addNew:function(){
                $("#edit").modal("show")
           },
           //模糊查询
           reload:function(){
                var demoReload1=$("#demoReload");
                   /* demoReload2=$("#phone").val(),
                    demoReload3=$("#name").val(),
                    demoReload4=$("#status").selected()*/
               tableInit.reload({
                   page:{
                       curr:1
                   },
                   where:{
                       key:{
                           account:demoReload1.val()
                           /* phone:demoReload2,
                            name:demoReload3,
                            state:demoReload4*/
                       }
                   }
               })
           }
        };
        /*===全选====*/
        table.on('checkbox(adminstar)', function(obj){
           //console.log(obj)
        });
        $('.layui-btn').on('click', function(){
            //alert("hello")
            var type = $(this).data('type');
            //console.log(type)
            active[type] ? active[type].call(this) : '';
        });
    })





</script>
</html>